import { Call, TranscriptSegment } from '@/types/call';

const generateId = () => Math.random().toString(36).substring(2, 15);

export const mockCalls: Call[] = [
  {
    id: 'call-001',
    startedAt: new Date(Date.now() - 1000 * 60 * 5), // 5 minutes ago
    endedAt: null,
    status: 'live',
    direction: 'inbound',
    fromNumber: '+1 (555) 234-5678',
    toNumber: '+1 (800) 555-1234',
    agentName: 'Sarah Johnson',
    queueOrDn: 'Support Queue',
    ticketId: null,
    hasTicketUpdate: false,
    notes: null,
  },
  {
    id: 'call-002',
    startedAt: new Date(Date.now() - 1000 * 60 * 12), // 12 minutes ago
    endedAt: null,
    status: 'live',
    direction: 'outbound',
    fromNumber: '+1 (800) 555-1234',
    toNumber: '+1 (555) 876-5432',
    agentName: 'Mike Chen',
    queueOrDn: 'Sales',
    ticketId: 'TKT-2024-1234',
    hasTicketUpdate: false,
    notes: null,
  },
  {
    id: 'call-003',
    startedAt: new Date(Date.now() - 1000 * 60 * 45),
    endedAt: new Date(Date.now() - 1000 * 60 * 30),
    status: 'ended',
    direction: 'inbound',
    fromNumber: '+1 (555) 111-2222',
    toNumber: '+1 (800) 555-1234',
    agentName: 'Emily Davis',
    queueOrDn: 'Support Queue',
    ticketId: 'TKT-2024-1230',
    hasTicketUpdate: true,
    notes: 'Customer reported printer connectivity issues. Resolved by reinstalling drivers.',
  },
  {
    id: 'call-004',
    startedAt: new Date(Date.now() - 1000 * 60 * 90),
    endedAt: new Date(Date.now() - 1000 * 60 * 75),
    status: 'ended',
    direction: 'inbound',
    fromNumber: '+1 (555) 333-4444',
    toNumber: '+1 (800) 555-1234',
    agentName: 'Sarah Johnson',
    queueOrDn: 'Support Queue',
    ticketId: 'TKT-2024-1228',
    hasTicketUpdate: true,
    notes: 'VPN access request processed.',
  },
  {
    id: 'call-005',
    startedAt: new Date(Date.now() - 1000 * 60 * 120),
    endedAt: new Date(Date.now() - 1000 * 60 * 115),
    status: 'failed',
    direction: 'inbound',
    fromNumber: '+1 (555) 999-8888',
    toNumber: '+1 (800) 555-1234',
    agentName: null,
    queueOrDn: 'Support Queue',
    ticketId: null,
    hasTicketUpdate: false,
    notes: 'Call dropped before agent pickup.',
  },
  {
    id: 'call-006',
    startedAt: new Date(Date.now() - 1000 * 60 * 180),
    endedAt: new Date(Date.now() - 1000 * 60 * 160),
    status: 'ended',
    direction: 'outbound',
    fromNumber: '+1 (800) 555-1234',
    toNumber: '+1 (555) 777-6666',
    agentName: 'Mike Chen',
    queueOrDn: 'Sales',
    ticketId: 'TKT-2024-1225',
    hasTicketUpdate: true,
    notes: 'Follow-up on software deployment project.',
  },
];

export const mockTranscripts: Record<string, TranscriptSegment[]> = {
  'call-001': [
    {
      id: generateId(),
      callId: 'call-001',
      speaker: 'agent',
      text: "Thank you for calling TechHelp Support, this is Sarah. How can I assist you today?",
      isFinal: true,
      timestamp: new Date(Date.now() - 1000 * 60 * 4.5),
    },
    {
      id: generateId(),
      callId: 'call-001',
      speaker: 'caller',
      text: "Hi Sarah, I'm having trouble connecting to the company VPN. It keeps saying my credentials are invalid.",
      isFinal: true,
      timestamp: new Date(Date.now() - 1000 * 60 * 4),
    },
    {
      id: generateId(),
      callId: 'call-001',
      speaker: 'agent',
      text: "I'm sorry to hear that. Let me pull up your account. Can I get your employee ID or email address?",
      isFinal: true,
      timestamp: new Date(Date.now() - 1000 * 60 * 3.5),
    },
    {
      id: generateId(),
      callId: 'call-001',
      speaker: 'caller',
      text: "Sure, my email is john.smith@acmecorp.com and my employee ID is AC-4521.",
      isFinal: true,
      timestamp: new Date(Date.now() - 1000 * 60 * 3),
    },
    {
      id: generateId(),
      callId: 'call-001',
      speaker: 'agent',
      text: "Thank you, John. I can see your account here. Let me check the VPN access logs...",
      isFinal: true,
      timestamp: new Date(Date.now() - 1000 * 60 * 2.5),
    },
    {
      id: generateId(),
      callId: 'call-001',
      speaker: 'agent',
      text: "I see the issue - it looks like your password was reset yesterday and the VPN client needs to be reconfigured. Let me walk you through that...",
      isFinal: false,
      timestamp: new Date(Date.now() - 1000 * 60 * 1),
    },
  ],
  'call-002': [
    {
      id: generateId(),
      callId: 'call-002',
      speaker: 'agent',
      text: "Hi, this is Mike from TechHelp. I'm following up on your request for additional software licenses.",
      isFinal: true,
      timestamp: new Date(Date.now() - 1000 * 60 * 11),
    },
    {
      id: generateId(),
      callId: 'call-002',
      speaker: 'caller',
      text: "Oh yes, thanks for calling back. We need to add 15 more seats to our Microsoft 365 subscription.",
      isFinal: true,
      timestamp: new Date(Date.now() - 1000 * 60 * 10.5),
    },
    {
      id: generateId(),
      callId: 'call-002',
      speaker: 'agent',
      text: "I can help with that. Let me check your current license count and prepare a quote for you.",
      isFinal: true,
      timestamp: new Date(Date.now() - 1000 * 60 * 10),
    },
    {
      id: generateId(),
      callId: 'call-002',
      speaker: 'caller',
      text: "That would be great. Also, can you include pricing for the E5 tier? We might want to upgrade some users.",
      isFinal: false,
      timestamp: new Date(Date.now() - 1000 * 60 * 2),
    },
  ],
  'call-003': [
    {
      id: generateId(),
      callId: 'call-003',
      speaker: 'agent',
      text: "TechHelp Support, Emily speaking. How may I help you?",
      isFinal: true,
      timestamp: new Date(Date.now() - 1000 * 60 * 44),
    },
    {
      id: generateId(),
      callId: 'call-003',
      speaker: 'caller',
      text: "My printer stopped working. It was fine yesterday but now nothing prints.",
      isFinal: true,
      timestamp: new Date(Date.now() - 1000 * 60 * 43),
    },
    {
      id: generateId(),
      callId: 'call-003',
      speaker: 'agent',
      text: "I understand how frustrating that can be. Let's troubleshoot this together. First, is the printer showing any error lights?",
      isFinal: true,
      timestamp: new Date(Date.now() - 1000 * 60 * 42),
    },
    {
      id: generateId(),
      callId: 'call-003',
      speaker: 'caller',
      text: "No, all the lights look normal. It's an HP LaserJet Pro connected via network.",
      isFinal: true,
      timestamp: new Date(Date.now() - 1000 * 60 * 41),
    },
    {
      id: generateId(),
      callId: 'call-003',
      speaker: 'agent',
      text: "Okay, let's try reinstalling the printer drivers. I'll remote in and do that for you now.",
      isFinal: true,
      timestamp: new Date(Date.now() - 1000 * 60 * 38),
    },
    {
      id: generateId(),
      callId: 'call-003',
      speaker: 'agent',
      text: "The drivers have been reinstalled. Can you try printing a test page now?",
      isFinal: true,
      timestamp: new Date(Date.now() - 1000 * 60 * 33),
    },
    {
      id: generateId(),
      callId: 'call-003',
      speaker: 'caller',
      text: "It worked! Thank you so much for your help!",
      isFinal: true,
      timestamp: new Date(Date.now() - 1000 * 60 * 31),
    },
    {
      id: generateId(),
      callId: 'call-003',
      speaker: 'agent',
      text: "You're welcome! Is there anything else I can help you with today?",
      isFinal: true,
      timestamp: new Date(Date.now() - 1000 * 60 * 30),
    },
  ],
};

// Simulated live transcript updates
const liveTranscriptPhrases = [
  "Let me check that for you...",
  "I understand, let me look into this.",
  "One moment while I pull up your account.",
  "I can see the issue now.",
  "That should be resolved. Can you try again?",
  "Is there anything else I can help with?",
];

export const getRandomTranscriptUpdate = (callId: string): TranscriptSegment => {
  return {
    id: generateId(),
    callId,
    speaker: Math.random() > 0.5 ? 'agent' : 'caller',
    text: liveTranscriptPhrases[Math.floor(Math.random() * liveTranscriptPhrases.length)],
    isFinal: Math.random() > 0.3,
    timestamp: new Date(),
  };
};
